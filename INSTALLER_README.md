# Создание инсталлятора ChatList

## Требования

1. **Inno Setup** - необходимо установить с официального сайта:
   - Скачать: https://jrsoftware.org/isinfo.php
   - Рекомендуется версия 6.x или новее

2. **Собранный исполняемый файл** - перед созданием инсталлятора необходимо собрать приложение:
   ```powershell
   .\build.ps1
   ```

## Создание инсталлятора

### Автоматический способ (рекомендуется)

Запустите скрипт `build_installer.ps1`:

```powershell
.\build_installer.ps1
```

Скрипт автоматически:
- Прочитает версию из `version.py`
- Проверит наличие исполняемого файла
- Обновит `setup.iss` с актуальной версией
- Создаст инсталлятор в папке `installer/`

### Ручной способ

1. Откройте Inno Setup Compiler
2. Откройте файл `setup.iss`
3. Нажмите "Build" → "Compile" (или F9)
4. Инсталлятор будет создан в папке `installer/`

## Функции инсталлятора

### Установка

- Установка в `Program Files\ChatList` (требуются права администратора)
- Создание ярлыков:
  - В меню "Пуск"
  - На рабочем столе (опционально)
  - В панели быстрого запуска (опционально)
- Автоматический запуск после установки (опционально)

### Удаление (Uninstall)

Инсталлятор включает полную секцию удаления:

1. **Удаление файлов приложения**:
   - Исполняемый файл
   - Файл лицензии
   - Все файлы из папки установки

2. **Удаление пользовательских данных** (с подтверждением):
   - База данных (`chatlist.db`)
   - Логи из папки `logs/`
   - Настройки из `%LOCALAPPDATA%\ChatList`

3. **Удаление ярлыков**:
   - Из меню "Пуск"
   - С рабочего стола
   - Из панели быстрого запуска

4. **Удаление записей реестра**:
   - Информация об установке
   - Записи для деинсталляции

## Структура файлов

```
installer/
└── ChatList-Setup-v1.0.0.exe  # Готовый инсталлятор
```

## Настройка

Основные настройки находятся в файле `setup.iss`:

- **AppName** - название приложения
- **AppVersion** - версия (автоматически обновляется из `version.py`)
- **DefaultDirName** - папка установки по умолчанию
- **PrivilegesRequired** - требуемые права (admin/lowest)

## Примечания

- Версия инсталлятора автоматически синхронизируется с версией в `version.py`
- Имя исполняемого файла должно соответствовать формату `ChatList-v{version}.exe`
- При изменении версии в `version.py` пересоберите инсталлятор


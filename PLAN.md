# План реализации программы ChatList

## Этап 1: Подготовка проекта и структуры

- [x] Создать структуру проекта (папки для модулей, если нужно)
- [x] Настроить requirements.txt с необходимыми зависимостями:
  - PyQt5 (GUI)
  - requests или httpx (HTTP-запросы)
  - python-dotenv (для работы с .env файлом)
  - sqlite3 (встроен в Python)
- [x] Создать файл .env.example с примером структуры для API-ключей
- [x] Создать .gitignore для исключения .env и других служебных файлов

## Этап 2: База данных (db.py)

- [x] Создать модуль db.py с функциями для работы с SQLite
- [x] Реализовать инициализацию базы данных (создание таблиц):
  - prompts (id, date, prompt, tags)
  - models (id, name, api_url, api_id, is_active)
  - results (id, prompt_id, model_id, response, date, selected)
  - settings (key, value)
- [x] Реализовать CRUD операции для каждой таблицы:
  - prompts: create, read, update, delete, search, sort
  - models: create, read, update, delete, get_active_models
  - results: create, read, update, delete, search, sort
  - settings: get, set
- [x] Добавить функции для поиска и сортировки во всех таблицах

## Этап 3: Работа с API (network.py)

- [x] Создать модуль network.py для отправки HTTP-запросов
- [x] Реализовать базовый класс или функции для работы с API разных провайдеров:
  - OpenAI API
  - DeepSeek API
  - Groq API
  - OpenRouter API
  - (возможность расширения для других провайдеров)
- [x] Реализовать обработку ошибок и таймаутов
- [x] Добавить логирование запросов и ответов
- [x] Реализовать асинхронную отправку запросов (опционально, для ускорения)

## Этап 4: Логика работы с моделями (models.py)

- [x] Создать модуль models.py
- [x] Реализовать функции для:
  - Получения списка активных моделей из БД
  - Загрузки API-ключей из .env файла
  - Формирования запросов к разным типам API
  - Парсинга ответов от разных провайдеров
- [x] Реализовать функцию отправки промта во все активные модели

## Этап 5: Графический интерфейс (main.py)

- [x] Создать основной класс MainWindow на PyQt5
- [x] Реализовать интерфейс ввода промта:
  - Поле ввода нового промта
  - Выпадающий список/таблица для выбора сохранённых промтов
  - Кнопка отправки запроса
- [x] Реализовать интерфейс выбора моделей:
  - Список доступных моделей с чекбоксами для активации/деактивации
- [x] Реализовать таблицу результатов:
  - Колонки: название модели, текст ответа, чекбокс selected
  - Возможность прокрутки для длинных ответов
- [x] Реализовать кнопку "Сохранить" для сохранения выбранных результатов
- [x] Добавить меню и панели инструментов:
  - Управление моделями (добавление, редактирование)
  - Управление промтами (просмотр, редактирование, удаление)
  - Просмотр сохранённых результатов
  - Настройки программы
  - Экспорт результатов

## Этап 6: Интеграция компонентов

- [x] Подключить db.py к main.py
- [x] Интегрировать network.py и models.py для отправки запросов
- [x] Реализовать логику работы с временной таблицей результатов (в памяти)
- [x] Реализовать сохранение выбранных результатов в БД
- [x] Добавить обработку ошибок на уровне GUI
- [x] Реализовать индикаторы загрузки во время отправки запросов

## Этап 7: Дополнительные функции

- [x] Реализовать поиск и сортировку во всех таблицах интерфейса
- [x] Добавить экспорт результатов в Markdown
- [x] Добавить экспорт результатов в JSON
- [x] Реализовать логирование запросов в файл
- [x] Добавить настройки программы (сохранение в таблицу settings)
- [x] Реализовать управление тегами для промтов

## Этап 8: Тестирование и оптимизация

- [ ] Протестировать работу с разными API провайдерами
- [ ] Проверить обработку ошибок (недоступность API, неверные ключи и т.д.)
- [ ] Оптимизировать производительность при работе с большим количеством моделей
- [ ] Проверить работу с большими объёмами данных в БД
- [ ] Исправить найденные баги

## Этап 9: Документация и финализация

- [x] Создать README.md с инструкциями по установке и использованию
- [x] Добавить комментарии в код
- [x] Создать примеры конфигурации .env файла
- [x] Подготовить проект к сборке исполняемого файла (PyInstaller)

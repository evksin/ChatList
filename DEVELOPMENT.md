# Руководство по разработке ChatList

## Процесс разработки

### Для разработки (без пересборки)

Во время разработки **не нужно** пересобирать исполняемый файл при каждом изменении. Запускайте приложение напрямую из Python:

```powershell
# Активируйте виртуальное окружение (если используете)
.\venv\Scripts\Activate.ps1

# Запустите приложение
python main.py
```

**Преимущества:**
- Быстрый запуск (без компиляции)
- Мгновенное применение изменений
- Удобная отладка
- Не нужно ждать сборки

### Для распространения (требуется пересборка)

Когда вы готовы распространить приложение или создать установщик, нужно пересобрать:

#### Вариант 1: Полная сборка (исполняемый файл + инсталлятор)

```powershell
.\build_all.ps1
```

Этот скрипт автоматически:
1. Соберёт исполняемый файл (`build.ps1`)
2. Создаст инсталлятор (`build_installer.ps1`)

#### Вариант 2: Только исполняемый файл

```powershell
.\build.ps1
```

#### Вариант 3: Только инсталлятор (если .exe уже собран)

```powershell
.\build_installer.ps1
```

#### Вариант 4: Исполняемый файл без инсталлятора

```powershell
.\build_all.ps1 -SkipInstaller
```

#### Вариант 5: Инсталлятор без пересборки .exe

```powershell
.\build_all.ps1 -SkipBuild
```

## Когда нужно пересобирать?

### ✅ Обязательно пересобирать:

- Перед распространением приложения
- После изменения функциональности
- После исправления багов
- Перед созданием релиза
- При изменении зависимостей
- При изменении иконки или ресурсов

### ❌ НЕ нужно пересобирать:

- Во время активной разработки
- При тестировании функций
- При отладке кода
- При изменении только комментариев или документации

## Рекомендуемый workflow

### Этап 1: Разработка
```powershell
# Запускайте напрямую из Python
python main.py

# Вносите изменения в код
# Тестируйте изменения
# Повторяйте цикл
```

### Этап 2: Тестирование
```powershell
# После завершения разработки протестируйте
python main.py

# Убедитесь, что всё работает
```

### Этап 3: Сборка для распространения
```powershell
# Обновите версию в version.py (если нужно)
# Соберите всё за один раз
.\build_all.ps1

# Или по шагам:
.\build.ps1          # Собрать .exe
.\build_installer.ps1  # Создать инсталлятор
```

## Структура файлов сборки

```
ChatList/
├── build.ps1              # Сборка исполняемого файла
├── build_installer.ps1    # Создание инсталлятора
├── build_all.ps1          # Полная сборка (оба шага)
├── setup.iss              # Скрипт Inno Setup
├── version.py             # Версия приложения
├── dist/                  # Собранные .exe файлы
│   └── ChatList-v1.0.0.exe
└── installer/             # Готовые инсталляторы
    └── ChatList-Setup-v1.0.0.exe
```

## Управление версиями

Версия хранится в одном месте - `version.py`:

```python
__version__ = "1.0.0"
```

При изменении версии:
1. Обновите `version.py`
2. Пересоберите всё: `.\build_all.ps1`
3. Версия автоматически обновится во всех местах:
   - В заголовке окна
   - В окне "О программе"
   - В логах
   - В имени .exe файла
   - В имени инсталлятора

## Советы по оптимизации

1. **Используйте виртуальное окружение** для изоляции зависимостей
2. **Тестируйте в Python** перед сборкой - это быстрее
3. **Собирайте только перед релизом** - не после каждого изменения
4. **Используйте `build_all.ps1`** для автоматизации процесса
5. **Проверяйте версию** перед сборкой релиза

## Время сборки

- **Запуск из Python**: ~1-2 секунды
- **Сборка .exe**: ~30-60 секунд (зависит от размера проекта)
- **Создание инсталлятора**: ~5-10 секунд
- **Полная сборка**: ~40-70 секунд

## Часто задаваемые вопросы

**Q: Нужно ли пересобирать после каждого изменения?**  
A: Нет, только для распространения. Во время разработки запускайте `python main.py`.

**Q: Можно ли тестировать .exe без создания инсталлятора?**  
A: Да, используйте `.\build.ps1` для создания только .exe файла.

**Q: Как быстро обновить версию?**  
A: Измените `version.py` и запустите `.\build_all.ps1`.

**Q: Что делать, если сборка занимает много времени?**  
A: Это нормально. Используйте Python для разработки, собирайте только перед релизом.


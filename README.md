# ChatList

Приложение для сравнения ответов различных нейросетевых моделей на один и тот же промт.

## Описание

ChatList — это Python-приложение с графическим интерфейсом на PyQt5, которое позволяет:

- Отправлять один промт в несколько нейросетей одновременно
- Сравнивать ответы разных моделей в удобной таблице
- Сохранять выбранные результаты в базу данных
- Управлять промтами и моделями
- Экспортировать результаты в Markdown или JSON

## Требования

- Python 3.9 или выше
- SQLite (встроен в Python)

## Установка

1. Клонируйте репозиторий или скачайте проект
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Настройка

1. Создайте файл `.env` в корне проекта на основе `.env.example`:

   ```bash
   # Скопируйте .env.example в .env и заполните своими ключами
   ```

2. Добавьте ваши API-ключи в файл `.env`:
   ```
   OPENAI_API_KEY=your_openai_key_here
   DEEPSEEK_API_KEY=your_deepseek_key_here
   GROQ_API_KEY=your_groq_key_here
   OPENROUTER_API_KEY=your_openrouter_key_here
   ```

## Запуск

```bash
python main.py
```

## Использование

### Добавление моделей

1. Откройте меню **Модели** → **Управление моделями**
2. Нажмите **Добавить**
3. Заполните форму:
   - **Название**: Имя модели (например, "GPT-4")
   - **API URL**: URL эндпоинта API
   - **API ID**: Имя переменной окружения с ключом (например, "OPENAI_API_KEY")
   - **Активна**: Отметьте, если модель должна использоваться по умолчанию

### Примеры конфигурации моделей

#### OpenAI

- **Название**: GPT-4
- **API URL**: `https://api.openai.com/v1/chat/completions`
- **API ID**: `OPENAI_API_KEY`

#### OpenRouter

- **Название**: GPT-4 через OpenRouter
- **API URL**: `https://openrouter.ai/api/v1/chat/completions`
- **API ID**: `OPENROUTER_API_KEY`

#### DeepSeek

- **Название**: DeepSeek Chat
- **API URL**: `https://api.deepseek.com/v1/chat/completions`
- **API ID**: `DEEPSEEK_API_KEY`

#### Groq

- **Название**: Llama 2 70B
- **API URL**: `https://api.groq.com/openai/v1/chat/completions`
- **API ID**: `GROQ_API_KEY`

### Работа с промтами

1. **Ввод нового промта**: Введите текст в поле ввода промта
2. **Выбор сохранённого промта**: Выберите из выпадающего списка
3. **Отправка запроса**: Нажмите кнопку "Отправить запрос"
4. **Просмотр результатов**: Результаты отображаются в таблице
5. **Сохранение результатов**: Отметьте нужные чекбоксы и нажмите "Сохранить выбранные результаты"

### Управление промтами

- **Меню** → **Промты** → **Управление промтами**: Просмотр, редактирование и удаление сохранённых промтов

### Экспорт результатов

- **Меню** → **Результаты** → **Экспорт в Markdown**: Экспорт в формат Markdown
- **Меню** → **Результаты** → **Экспорт в JSON**: Экспорт в формат JSON

## Структура проекта

```
ChatList/
├── main.py              # Главный модуль с GUI
├── db.py                # Модуль работы с базой данных
├── network.py           # Модуль работы с API провайдерами
├── models.py            # Модуль логики работы с моделями
├── requirements.txt     # Зависимости проекта
├── .env                 # Файл с API-ключами (не в репозитории)
├── .env.example         # Пример файла с API-ключами
├── .gitignore           # Игнорируемые файлы
├── chatlist.db          # База данных SQLite (создаётся автоматически)
├── logs/                # Папка с логами
├── PROJECT.md           # Спецификация проекта
├── PLAN.md              # План реализации
├── DATABASE.md          # Описание схемы базы данных
└── README.md            # Этот файл
```

## База данных

Приложение использует SQLite для хранения данных. База данных создаётся автоматически при первом запуске.

### Таблицы:

- **prompts**: Сохранённые промты
- **models**: Конфигурация моделей
- **results**: Сохранённые результаты
- **settings**: Настройки программы

Подробное описание схемы базы данных см. в `DATABASE.md`.

## Логирование

Логи сохраняются в папке `logs/` с именем файла `chatlist_YYYYMMDD.log`.

## Поддерживаемые API провайдеры

- OpenAI
- OpenRouter
- DeepSeek
- Groq
- Любые другие API, совместимые с форматом OpenAI

## Сборка исполняемого файла

Для создания исполняемого файла используйте PyInstaller:

```bash
.\build.ps1
```

Или вручную:

```bash
pyinstaller --onefile --windowed --name "ChatList" main.py
```

Исполняемый файл будет создан в папке `dist/`.

## Разработка

### Архитектура

- **db.py**: Инкапсулирует все операции с базой данных
- **network.py**: Обрабатывает HTTP-запросы к различным API
- **models.py**: Управляет моделями и отправкой запросов
- **main.py**: Графический интерфейс и основная логика приложения

### Добавление нового провайдера API

1. Создайте класс-наследник `APIProvider` в `network.py`
2. Реализуйте методы `send_request()` и `parse_response()`
3. Добавьте провайдер в функцию `create_provider()`
4. Обновите функцию `detect_provider_type()` для автоматического определения

## Лицензия

См. файл LICENSE

## Автор

Создано для удобного сравнения ответов различных нейросетевых моделей.
